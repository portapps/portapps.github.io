var actionAppDownload={init:function(e){if(!($(e).length<=0)){$(e).removeClass("hide");var a=$("#app-name").val(),n=null;$.getJSON("/api/v1/apps/"+a+".json",function(e){n=e,void 0!==n.groups&&n.groups.length>0?actionAppDownload.renderGroups(n):actionAppDownload.render(n),actionAppDownload.refreshDownloadButton(n)}),$("#app-version").change(function(){actionAppDownload.resetSelects(n),actionAppDownload.refreshDownloadButton(n)}),$("#app-platform").change(function(){actionAppDownload.refreshDownloadButton(n)}),$("#app-format").change(function(){actionAppDownload.refreshDownloadButton(n)})}},render:function(e){var a=new Array;$.each(e.releases,function(n,t){if(-1===jQuery.inArray(t.version,a)){var o=t.version+"-"+t.release;"pre-release"===t.type?o+=" (development release)":"broken"===t.type&&(o+=" (broken release)"),$("#app-version").append($("<option>",{value:t.version+";"+t.release,text:o}).attr({"data-rtype":t.type,"data-rname":t.altname||e.name})),a.push(t.version)}}),actionAppDownload.setCurrentRelease(e.releases)},renderGroups:function(e){var a=new Array;$.each(e.groups,function(n,t){optGroup=$("<optgroup>",{label:t}),$.each(e.releases,function(n,o){if(o.version.startsWith(t)&&-1===jQuery.inArray(o.version,a)){var r=o.version+"-"+o.release;"pre-release"===o.type?r+=" (development release)":"broken"===o.type&&(r+=" (broken release)"),optGroup.append($("<option>",{value:o.version+";"+o.release,text:r}).attr({"data-rtype":o.type,"data-rname":o.altname||e.name})),a.push(o.version)}}),$("#app-version").append(optGroup)}),actionAppDownload.setCurrentRelease(e.releases)},refreshDownloadButton:function(e){var a=$("option:selected",$("#app-version")).attr("data-rname"),n=$("#app-version").val(),t=n.split(";"),o=t[0]+"-"+t[1],r=$("option:selected",$("#app-version")).attr("data-rtype"),i=$("#app-platform").val(),p=$("#app-format").val(),s="setup"===p?"-setup.exe":"."+p,l=""===i?o:i+"-"+o,d=["win64","x64",""].indexOf(i)>-1?"btn-success":"btn-warning";$(".app-download-button").empty(),"broken"===r?$(".app-download-button").append($("<div>",{class:"bs-callout bs-callout-danger",style:"margin: 0 0 10px;"}).append("<h4>Broken release!</h4>").append("<p>"+o+" is <strong>broken</strong>. Please download the latest stable release.</p>")):"pre-release"===r&&$(".app-download-button").append($("<div>",{class:"bs-callout bs-callout-warning",style:"margin: 0 0 10px;"}).append("<h4>Development release!</h4>").append("<p>"+o+" is not a released version of "+e.label+" Portable. <strong>Be careful</strong>, things are unstable and might even be broken.</p>")),$(".app-download-button").fadeOut(250).append($("<a>",{href:"/download/"+a+"-portable-"+l+s,class:"btn "+d,style:"text-align: left;"}).append('<span class="app-download-text"><span class="fa fa-download"></span>&nbsp;Download</span><br />').append("<small>"+a+"-portable-"+l+s+"</small>")).fadeIn(250)},resetSelects:function(e){var a=$("#app-version").val(),n=a.split(";"),t=n[0],o=n[1];$.each(e.releases,function(e,a){if(a.version===t&&a.release===o)return actionAppDownload.setPlatforms(a.platforms),$("#app-platform").val(actionAppDownload.getRecommendedPlatform(a.platforms)),actionAppDownload.setFormats(a.formats),!1})},setPlatforms:function(e){$("#app-platform").find("option").remove().end(),$.each(e,function(e,a){var n=a;["win64","x64"].indexOf(a)>-1&&(n="Windows 64-bits"),["win32","ia32"].indexOf(a)>-1&&(n="Windows 32-bits"),""===a&&(n="Windows 32-bits / 64-bits"),$("#app-platform").append($("<option>",{value:a,text:n}))})},setFormats:function(e){$("#app-format").find("option").remove().end(),$.each(e,function(e,a){var n=a;"setup"===a?n="Portable setup (recommended)":"7z"===a?n="7z archive":"zip"===a&&(n="zip archive"),$("#app-format").append($("<option>",{value:a,text:n}))})},setCurrentRelease:function(e){$.each(e,function(e,a){if("release"===a.type)return $("#app-version").val(a.version+";"+a.release),actionAppDownload.setPlatforms(a.platforms),$("#app-platform").val(actionAppDownload.getRecommendedPlatform(a.platforms)),actionAppDownload.setFormats(a.formats),$("#app-format").val(a.formats[0]),!1})},getRecommendedPlatform:function(e){var a=null,n=null;return $.each(e,function(e,t){["win64","x64"].indexOf(t)>-1&&(a=t),["win32","ia32"].indexOf(t)>-1&&(n=t)}),null!==a?a:null!==n?n:""}},actionCards={init:function(e){$(e).length<=0||$(e+" .item-inner").matchHeight()}},actionCdTop={init:function(e){$(e).length<=0||($(window).scroll(function(){$(this).scrollTop()>300?$(e).addClass("cd-is-visible"):$(e).removeClass("cd-is-visible cd-fade-out"),$(this).scrollTop()>1200&&$(e).addClass("cd-fade-out")}),$(e).on("click",function(e){e.preventDefault(),$("body, html").animate({scrollTop:0},700)}))}},actionHome={init:function(e){$(e).length<=0||$(e+" .item").matchHeight()}},actionProgressbar={init:function(e){$(e).length<=0||$(".progressbar-fill").delay(1e3).queue(function(){var e=$(this).attr("data-time")||2;$(this).css("width","100%").css("transition","width "+e+"s ease-in-out")})}};$(document).ready(function(){$(window).on("load resize",function(){$(window).trigger("scroll")}),$("a.scrollto").on("click",function(e){var a=this.hash;e.preventDefault(),$("body").scrollTo(a,800,{offset:0,axis:"y"})}),WebFont.load({google:{families:["Lora:400,700,400italic,700italic","Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"]}}),$('[data-toggle="tooltip"]').tooltip(),$("#searchapp").length>0&&$("#searchapp").keyup(function(){var e=$(this).val(),a=0;$(".cards-wrapper .item-enable").each(function(){$(".item-enable").attr("data-app");$(this).text().search(new RegExp(e,"i"))<0?$(this).hide():($(this).show(),a++)})}),actionCdTop.init(".cd-top"),actionHome.init(".home"),actionProgressbar.init(".progressbar"),actionCards.init(".card-section"),actionAppDownload.init(".download-list")});